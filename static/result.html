<!DOCTYPE html>
<html lang="ja">

<head>
  <title>result</title>
  <meta charset="utf-8">
  <link rel="icon" href="favicon.ico">
  <link rel="stylesheet" type="text/css" href="hoge.css">
  <link href="https://fonts.googleapis.com/css?family=M+PLUS+Rounded+1c" rel="stylesheet">
  <link href="https://fonts.googleapis.com/earlyaccess/nicomoji.css" rel="stylesheet">
  <script src="./js/sweetalert2.all.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/parameter.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/profile.js" type="module" charset="utf-8"></script>
  <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</head>

<body>
  <header>
    <ul class="menu-list">
      <li class="menu-list-item" id="home" onclick="move('index','name')">ãƒ›ãƒ¼ãƒ </li>
      <li class="menu-list-item" id="friend" onclick="move('friend','name')">ãƒ•ãƒ¬ãƒ³ãƒ‰</li>
      <li class="menu-list-item" id="rank" onclick="move('ranking','name')">ãƒ©ãƒ³ã‚­ãƒ³ã‚°</li>
      <li class="menu-list-item" id="mission" onclick="move('mission','name')">ãƒŸãƒƒã‚·ãƒ§ãƒ³</li>
      <li class="menu-list-item" id="setup" onclick="OpenProfile('index')">è¨­å®š</li>
    </ul>
  </header>
  <h1 id="appname">ãƒªã‚¶ãƒ«ãƒˆ</h1>
  <p class="rescom">ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼</p>
  <p id="nam" class="rescom"> ã•ã‚“ã®æ¶ˆè²»ã—ãŸã‚«ãƒ­ãƒªãƒ¼</p>
  <!--ã‚«ãƒ­ãƒªãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹-->
  <p id="kalorie" class="rescom"> kcal</p>
  <p id="cnt" class="rescom">ç›®æ¨™é”æˆ å›ç›®ã§ã™ï¼</p>
  <p id="ratio" class="rescom">ã‚ãªãŸã®ãƒãƒƒã‚¹ãƒ«ãƒ¬ãƒ¼ãƒˆï¼š </p>
  <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-size="large"
    data-text="ãã‚“ãƒˆãƒ¬ã—ãŸãœï¼" data-url="https://t2.intern.jigd.info" data-show-count="false">Tweet</a>
</body>
<script type="module">
  import { fetchJSON } from "https://code4sabae.github.io/js/fetchJSON.js";
  //JSONdataã‚’å—ã‘å–ã‚Šã€æˆåŠŸã—ãŸã‚«ã‚¦ãƒ³ãƒˆï¼Ÿ
  window.onload = async () => {
    if (param["name"]) {
      setup.innerHTML = param["name"];
    }
    var number = param["number"];
    var kalorie = number * 10;
    var name = param["name"];

    document.getElementById("kalorie").innerHTML = kalorie + "kcal " + "ğŸ‰";
    document.getElementById("nam").innerHTML = name + "ã•ã‚“ã®æ¶ˆè²»ã—ãŸã‚«ãƒ­ãƒªãƒ¼";

    // -> server
    var req = { id: name };
    const res = await fetchJSON("/api/result", req);
    document.getElementById("cnt").innerHTML = "ç›®æ¨™é”æˆ" + res + "å›ç›®ã§ã™ï¼";
    req = { id: name, kal: kalorie };
    var ratio = await fetchJSON("/api/ratio", req);
    document.getElementById("ratio").innerHTML = "ã‚ãªãŸã®ãƒãƒƒã‚¹ãƒ«ãƒ¬ãƒ¼ãƒˆï¼š" + ratio;
  };

  //æ›´æ–°æ¤œçŸ¥
  var hash = decodeURIComponent(location.hash.slice(1));
  if (hash === "reload") {
    move("index", "name");
  }
  else {
    location.hash = "reload";
  }

  console.log("ã“ã“ã«ãƒˆãƒ­ãƒ•ã‚£ãƒ¼ã®ã¶ã‚“ã‚ã‚Šã‘ã‚Š");

</script>

</html>